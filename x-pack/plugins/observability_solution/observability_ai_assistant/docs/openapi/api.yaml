openapi: 3.0.0
info:
  title: Elastic AI Assistant for Observability
  version: 1.0.0
paths:
  "/api/observability_ai_assistant/chat/complete":
    post:
      summary: "[technical preview] Chat with the Elastic AI Assistant for Observability"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                body:
                  type: object
                  properties:
                    messages:
                      type: array
                      items:
                        type: object
                        properties:
                          '@timestamp':
                            type: string
                          message:
                            type: object
                            properties:
                              role:
                                type: string
                                enum:
                                  - system
                                  - assistant
                                  - user
                              content:
                                type: string
                              name:
                                type: string
                              event:
                                type: string
                              function_call:
                                type: object
                                properties:
                                  name:
                                    type: string
                                  trigger:
                                    type: string
                                    enum:
                                      - assistant
                                      - user
                                      - elastic
                                  arguments:
                                    type: object
                                  data:
                                    type: object
                                required:
                                  - name
                                  - trigger
                            required:
                              - role
                        required:
                          - '@timestamp'
                          - message
                    connectorId:
                      type: string
                    persist:
                      type: object
                    conversationId:
                      type: string
                    title:
                      type: string
                    responseLanguage:
                      type: string
                    disableFunctions:
                      type: object
                    instructions:
                      type: array
                      items:
                        anyOf:
                          - type: string
                          - type: object
                            properties:
                              doc_id:
                                type: string
                              text:
                                type: string
                            required:
                              - doc_id
                              - text
                    actions:
                      type: array
                      items:
                        type: object
                        properties:
                          name:
                            type: string
                          description:
                            type: string
                          parameters:
                            type: object
                        required:
                          - name
                          - description
                  required:
                    - messages
                    - connectorId
                    - persist
                query:
                  type: object
                  properties:
                    format:
                      type: string
                      enum:
                        - default
                        - openai
              required:
                - body

      responses:
        "200":
          description: "Chat completion events"
          content:
            application/octet-stream:
              schema:
                type: object
                